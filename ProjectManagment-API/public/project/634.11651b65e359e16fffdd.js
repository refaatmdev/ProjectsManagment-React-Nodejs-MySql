(self.webpackChunkmaterialpro=self.webpackChunkmaterialpro||[]).push([[634],{6634:(e,t,o)=>{"use strict";o.r(t),o.d(t,{TimeSheetModule:()=>je});var i=o(1116),r=o(4258),s=o(1041),a=o(2935),n=o(7895),l=o(6238),c=o(9996),d=o(3835),u=o(2648),p=o(9609),m=o(9235),h=o(5366),g=o(3300),f=o(3333),Z=o(2251),A=o(5965),y=o(3490),v=o(3070),T=o(5522),q=o(9961),x=o(4369),b=o(7307),C=o(9550),N=o(7064);const E=["projectInput"],_=["auto"],w=["autocompleteTrigger"],j=["employeeInput"],D=["autoEmployee"],Y=["autocompleteTriggerEmployee"];function I(e,t){if(1&e&&(h.TgZ(0,"div",23),h.TgZ(1,"div",7),h.TgZ(2,"mat-form-field"),h._UZ(3,"input",29),h.qZA(),h.qZA(),h.qZA()),2&e){const e=h.oxw(2);h.xp6(3),h.Q6J("value",e.local_data.firstName+" "+e.local_data.lastName)}}function P(e,t){1&e&&(h.TgZ(0,"mat-icon",36),h._uU(1,"cancel"),h.qZA())}function U(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"mat-chip",34),h.NdJ("removed",function(){const t=h.CHM(e).$implicit;return h.oxw(3).removeEmployee(t)}),h._uU(1),h.YNc(2,P,2,0,"mat-icon",35),h.qZA()}if(2&e){const e=t.$implicit,o=h.oxw(3);h.Q6J("selectable",!0)("removable",!0),h.xp6(1),h.AsE(" ",e.firstName," ",e.lastName," "),h.xp6(1),h.Q6J("ngIf",o.removable)}}function S(e,t){if(1&e&&(h.TgZ(0,"mat-option",37),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e),h.xp6(1),h.AsE(" ",e.firstName," ",e.lastName," ")}}function M(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",6),h.TgZ(1,"div",7),h.TgZ(2,"mat-form-field",12),h.TgZ(3,"mat-chip-list",13,30),h.YNc(5,U,3,5,"mat-chip",15),h.TgZ(6,"input",31,32),h.NdJ("matChipInputTokenEnd",function(t){return h.CHM(e),h.oxw(2).addEmployee(t)}),h.qZA(),h.qZA(),h.TgZ(9,"mat-autocomplete",18,33),h.NdJ("optionSelected",function(t){return h.CHM(e),h.oxw(2).selectedEmployeeF(t)}),h.YNc(11,S,2,3,"mat-option",20),h.ALo(12,"async"),h.qZA(),h.TgZ(13,"button",21),h.NdJ("click",function(){h.CHM(e);const t=h.oxw(2);return t.openAutoEmployee(t.matACTriggerEmployee)}),h.TgZ(14,"mat-icon",22),h._uU(15,"expand_more"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.MAs(4),t=h.MAs(10),o=h.oxw(2);h.xp6(5),h.Q6J("ngForOf",o.selectedEmployees),h.xp6(1),h.Q6J("matAutocomplete",t)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),h.xp6(5),h.Q6J("ngForOf",h.lcZ(12,5,o.filteredEmployees))}}function R(e,t){1&e&&(h.TgZ(0,"mat-icon",36),h._uU(1,"cancel"),h.qZA())}function k(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"mat-chip",34),h.NdJ("removed",function(){const t=h.CHM(e).$implicit;return h.oxw(2).remove(t)}),h._uU(1),h.YNc(2,R,2,0,"mat-icon",35),h.qZA()}if(2&e){const e=t.$implicit,o=h.oxw(2);h.Q6J("selectable",!0)("removable",!0),h.xp6(1),h.hij(" ",e.projectName," "),h.xp6(1),h.Q6J("ngIf",o.removable)}}function F(e,t){if(1&e&&(h.TgZ(0,"mat-option",37),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e),h.xp6(1),h.hij(" ",e.projectName," ")}}function J(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"mat-dialog-content",3),h.TgZ(1,"form",4),h.TgZ(2,"div",5),h.TgZ(3,"div",6),h.TgZ(4,"div",7),h.TgZ(5,"ejs-datepicker",8),h.NdJ("change",function(t){return h.CHM(e),h.oxw().getRecordDate(t)}),h.qZA(),h.qZA(),h.qZA(),h.YNc(6,I,4,1,"div",9),h.YNc(7,M,16,7,"div",10),h.TgZ(8,"div",11),h.TgZ(9,"div",7),h.TgZ(10,"mat-form-field",12),h.TgZ(11,"mat-chip-list",13,14),h.YNc(13,k,3,4,"mat-chip",15),h.TgZ(14,"input",16,17),h.NdJ("matChipInputTokenEnd",function(t){return h.CHM(e),h.oxw().add(t)}),h.qZA(),h.qZA(),h.TgZ(17,"mat-autocomplete",18,19),h.NdJ("optionSelected",function(t){return h.CHM(e),h.oxw().selected(t)}),h.YNc(19,F,2,2,"mat-option",20),h.ALo(20,"async"),h.qZA(),h.TgZ(21,"button",21),h.NdJ("click",function(){h.CHM(e);const t=h.MAs(16);return h.oxw().openAuto(t)}),h.TgZ(22,"mat-icon",22),h._uU(23,"expand_more"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(24,"div",23),h.TgZ(25,"div",7),h._UZ(26,"ejs-timepicker",24),h.qZA(),h.qZA(),h.TgZ(27,"div",23),h.TgZ(28,"div",7),h._UZ(29,"ejs-timepicker",25),h.qZA(),h.qZA(),h.TgZ(30,"div",6),h.TgZ(31,"div",7),h.TgZ(32,"mat-form-field"),h._UZ(33,"input",26),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(34,"button",27),h.NdJ("click",function(){return h.CHM(e),h.oxw().doAction()}),h._uU(35),h.qZA(),h.TgZ(36,"button",28),h.NdJ("click",function(){return h.CHM(e),h.oxw().closeDialog()}),h._uU(37,"Cancel"),h.qZA(),h.qZA(),h._UZ(38,"div"),h.qZA()}if(2&e){const e=h.MAs(12),t=h.MAs(18),o=h.oxw();h.xp6(1),h.Q6J("formGroup",o.form),h.xp6(4),h.Q6J("value",o.recordDate),h.xp6(1),h.Q6J("ngIf","Update"==o.action),h.xp6(1),h.Q6J("ngIf","Add"==o.action),h.xp6(6),h.Q6J("ngForOf",o.selectedProjects),h.xp6(1),h.Q6J("matAutocomplete",t)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),h.xp6(5),h.Q6J("ngForOf",h.lcZ(20,12,o.filteredProjects)),h.xp6(7),h.Q6J("value",o.startAt),h.xp6(3),h.Q6J("value",o.endAt),h.xp6(6),h.hij(" ",o.action," ")}}function O(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"p"),h._uU(1," Sure to delete "),h.TgZ(2,"b"),h._uU(3),h.qZA(),h._uU(4," ? "),h.qZA(),h.TgZ(5,"div",38),h.TgZ(6,"button",27),h.NdJ("click",function(){return h.CHM(e),h.oxw().doAction()}),h._uU(7),h.qZA(),h.TgZ(8,"button",28),h.NdJ("click",function(){return h.CHM(e),h.oxw().closeDialog()}),h._uU(9,"Cancel"),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(3),h.hij(" ",e.local_data.date,""),h.xp6(4),h.hij(" ",e.action," ")}}(0,n.dW)(!0);let H=(()=>{class e{constructor(e,t,o,i,r,s,a){this.formBuilder=e,this.datePipe=t,this.dialogRef=o,this.employeeService=i,this.projectsService=r,this.recordsService=s,this.data=a,this.availableEmployees=[],this.employees=[],this.selectedEmployees=[],this.selectedProjects=[],this.selectedWorkedPlaces=[],this.optionsEmployee=[],this.optionsProjects=[],this.visible=!0,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[m.K5,m.OC],this.allProjects=[],this.opened=!1,this.allEmployees=[],this.local_data=Object.assign({},a),this.action=this.local_data.action,this.getProjects(),this.getEmployees(),this.initForm(),this.reChangeDates(new Date),"Update"===this.local_data.action&&this.filForm(),this.filteredProjects=this.form.get("projectId").valueChanges.pipe((0,l.O)(null),(0,c.U)(e=>e?this._filter(e):this.allProjects.slice())),this.filteredEmployees=this.form.get("employeeId").valueChanges.pipe((0,l.O)(null),(0,c.U)(e=>e?this._filterEmployee(e):this.availableEmployees.slice()))}ngOnInit(){}getEmployees(){this.subEmployee$=this.employeeService.employee$.pipe((0,d.h)(e=>void 0!==e)).subscribe(e=>{this.allEmployees=e.employee,this.availableEmployees=this.allEmployees})}getProjects(){this.subProject$=this.projectsService.projects$.pipe((0,d.h)(e=>void 0!==e)).subscribe(e=>{this.allProjects=e.projects})}initForm(){this.form=this.formBuilder.group({date:new s.NI(this.recordDate,{validators:[s.kI.required]}),employeeId:new s.NI("",{validators:[s.kI.required]}),projectId:new s.NI([],{validators:[s.kI.required]}),startAt:new s.NI(this.startAt,{validators:[s.kI.required]}),endAt:new s.NI(this.endAt,{validators:[s.kI.required]}),notes:new s.NI("")})}filForm(){const e=this.local_data.dayWorkedPlace.split(",");this.selectedProjects=this.allProjects.filter(t=>e.find(e=>e==t.id)),this.selectedEmployees.push(this.local_data.employeeId),this.form.setValue({date:new Date(this.local_data.date),employeeId:this.selectedEmployees,projectId:this.selectedProjects,startAt:this.local_data.startAt,endAt:this.local_data.endAt,notes:this.local_data.notes})}getSelectedOptions(e){this.selectedWorkedPlaces=e}getRecordDate(e){this.reChangeDates(e.value),this.newDate=e.value}reChangeDates(e){this.recordDate=e,this.month=this.recordDate.getMonth(),this.fullYear=this.recordDate.getFullYear(),this.date=this.recordDate.getDate(),this.startAt=new Date(this.fullYear,this.month,this.date,7,0,0),this.endAt=new Date(this.fullYear,this.month,this.date,16,0,0),this.form.get("date").setValue(this.recordDate),this.form.get("startAt").setValue(this.startAt),this.form.get("endAt").setValue(this.endAt),this.recordsService.getRecordsByDate(e.toISOString().split("T")[0]).subscribe(e=>{console.log(e),Array.isArray(e)&&(this.filteredEmployees=this.form.get("employeeId").valueChanges.pipe((0,l.O)(null),(0,c.U)(t=>this.allEmployees.filter(t=>!e.find(e=>t.id===e.employeeId)))))})}doAction(){let e,t,o=this.selectedProjects.map(e=>e.id);"Update"==this.action?(e=this.selectedEmployees,t=this.local_data.id?this.local_data.id:null):e=this.selectedEmployees.map(e=>e.id);const i={id:t,date:this.form.value.date.toISOString().split("T")[0],employeeId:e,projectId:o,startAt:this.form.value.startAt,endAt:this.form.value.endAt,notes:this.form.value.notes,createdAt:p().format("YYYY-MM-DD")};this.form.invalids||this.dialogRef.close({event:this.action,data:i})}closeDialog(){this.dialogRef.close({event:"Cancel"})}add(e){const t=e.input,o=e.value;o.trim()&&this.selectedProjects.push(o.trim()),t&&(t.value=""),this.form.get("projectId").setValue(null)}remove(e){const t=this.selectedProjects.indexOf(e);t>=0&&this.selectedProjects.splice(t,1)}selected(e){const t=e.option.value;this.selectedProjects.some(e=>e.id===(null==t?void 0:t.id))?this.selectedProjects=[...this.selectedProjects.filter(e=>e.id!==t.id)]:this.selectedProjects.push(t),this.projectInput.nativeElement.value="",this.form.controls.projectId.setValue(null),requestAnimationFrame(()=>{this.openAuto(this.matACTrigger)})}_filter(e){return this.allProjects.filter(t=>t.projectName.includes(e))}openAuto(e){e.openPanel(),this.projectInput.nativeElement.focus()}addEmployee(e){const t=e.input,o=e.value;o.trim()&&this.selectedEmployees.push(o.trim()),t&&(t.value=""),this.form.get("projectId").setValue(null)}removeEmployee(e){const t=this.selectedEmployees.indexOf(e);t>=0&&this.selectedEmployees.splice(t,1)}selectedEmployeeF(e){const t=e.option.value;this.selectedEmployees.some(e=>e.id===(null==t?void 0:t.id))?this.selectedEmployees=[...this.selectedEmployees.filter(e=>e.id!==t.id)]:this.selectedEmployees.push(t),this.employeeInput.nativeElement.value="",this.form.controls.employeeId.setValue(null),requestAnimationFrame(()=>{this.openAutoEmployee(this.matACTriggerEmployee)})}_filterEmployee(e){return this.availableEmployees.filter(t=>t.firstName.includes(e))}openAutoEmployee(e){e.openPanel(),this.employeeInput.nativeElement.focus()}ngOnDestroy(){this.subEmployee$&&this.subEmployee$.unsubscribe(),this.subProject$&&this.subProject$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(s.qu),h.Y36(i.uU),h.Y36(a.so),h.Y36(g.M),h.Y36(f.m),h.Y36(Z.$),h.Y36(a.WI,8))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-record-action"]],viewQuery:function(e,t){if(1&e&&(h.Gf(u.zi,5),h.Gf(E,5),h.Gf(_,5),h.Gf(w,5),h.Gf(j,5),h.Gf(D,5),h.Gf(Y,5)),2&e){let e;h.iGM(e=h.CRH())&&(t.multiSelect=e.first),h.iGM(e=h.CRH())&&(t.projectInput=e.first),h.iGM(e=h.CRH())&&(t.matAutocomplete=e.first),h.iGM(e=h.CRH())&&(t.matACTrigger=e.first),h.iGM(e=h.CRH())&&(t.employeeInput=e.first),h.iGM(e=h.CRH())&&(t.matAutocompleteEmployee=e.first),h.iGM(e=h.CRH())&&(t.matACTriggerEmployee=e.first)}},decls:6,vars:3,consts:[["mat-dialog-title","",1,"font-medium"],["class","pb-3 mat-typography","style","width: 500px",4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"pb-3","mat-typography",2,"width","500px"],[3,"formGroup"],["fxLayout","row wrap",1,"align-items-center"],["fxFlex","100","fxFlex.gt-md","100"],[1,"m-r-15","m-l-15"],["formControlName","date","placeholder"," date  (required) *","placeholder","Enter date",3,"value","change"],["fxFlex","100","fxFlex.gt-md","50",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","100",4,"ngIf"],["fxFlex","100","fxFlex.gt-md","1100"],[1,"example-chip-list"],["aria-label","projects selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Select Projects..","formControlName","projectId",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["projectInput","","autocompleteTrigger","matAutocompleteTrigger"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","",2,"width","34px","height","34px",3,"click"],[2,"width","34px"],["fxFlex","100","fxFlex.gt-md","50"],["formControlName","startAt","placeholder"," Start At  (required) *",3,"value"],["formControlName","endAt","placeholder"," End At  (required) *",3,"value"],["matInput","","type","text","name","notes","formControlName","notes","placeholder"," Notes"],["mat-button","","mat-flat-button","","color","warn",3,"click"],["mat-button","",3,"click"],["matInput","","type","text","name","notes","disabled","",3,"value"],["chipListEmployee",""],["placeholder","Select Employee..","formControlName","employeeId",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["employeeInput","","autocompleteTriggerEmployee","matAutocompleteTrigger"],["autoEmployee","matAutocomplete"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["mat-dialog-actions","","align","end",1,"pt-3"]],template:function(e,t){if(1&e&&(h.TgZ(0,"h2",0),h.TgZ(1,"strong"),h._uU(2),h.qZA(),h.qZA(),h.YNc(3,J,39,14,"mat-dialog-content",1),h.YNc(4,O,10,2,"ng-template",null,2,h.W1O)),2&e){const e=h.MAs(5);h.xp6(2),h.hij("",t.action," record"),h.xp6(1),h.Q6J("ngIf","Delete"!=t.action)("ngIfElse",e)}},directives:[a.uh,i.O5,a.xY,s._Y,s.JL,s.sg,A.xw,A.yH,y.Lr,s.JJ,s.u,v.KE,T.qn,i.sg,s.Fj,q.ZL,T.oH,q.XC,x.lW,v.R9,b.Hw,y.eQ,C.Nt,T.HS,T.qH,N.ey,a.H8],pipes:[i.Ov],styles:[""]}),e})();var Q=o(7340),B=o(5609),$=o(9241),L=o(62),G=o(2797);let z=(()=>{class e{constructor(){this.getRecordsByDateEvent=new h.vpe,this.filterByNameEvent=new h.vpe,this.AddRecordEvent=new h.vpe,this.currentDate=new Date,this.filterValue=""}ngOnInit(){}getSelectedDate(e){this.currentDate=e.value}submit(){this.getRecordsByDateEvent.emit(this.currentDate)}applyFilter(e){this.filterValue=e,this.filterByNameEvent.emit(this.filterValue)}addRecord(){this.AddRecordEvent.emit("Add")}clear(){this.filterValue=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-filter-by-month"]],outputs:{getRecordsByDateEvent:"getRecordsByDateEvent",filterByNameEvent:"filterByNameEvent",AddRecordEvent:"AddRecordEvent"},decls:48,vars:2,consts:[["fxLayout","row wrap",1,"course-app"],["fxFlex.gt-md","33.3","fxFlex.gt-lg","33.3","fxFlex","100"],[2,"height","87%"],[1,"course-header",2,"background-color","#fc4b6c"],[1,"course-name"],[1,"course-duration"],[1,"m-r-10"],[1,"text-center"],[1,"m-b-5"],["start","Year","format","MM/yyyy","depth","Year","placeholder","Enter date",3,"value","change"],["mat-button","",3,"click"],[1,"course-header",2,"background-color","#1e88e5"],["matInput","","placeholder","Search Employee",3,"value","keyup"],[1,"course-header",2,"background-color","#ffb22b"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"mat-card",2),h.TgZ(3,"mat-card-header",3),h.TgZ(4,"mat-card-title"),h.TgZ(5,"span",4),h._uU(6,"Filter by Month"),h.qZA(),h.TgZ(7,"span",5),h.TgZ(8,"mat-icon",6),h._uU(9,"access_time"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"mat-card-content",7),h.TgZ(11,"p",8),h._uU(12,"Please Choose Month"),h.qZA(),h.TgZ(13,"ejs-datepicker",9),h.NdJ("change",function(e){return t.getSelectedDate(e)}),h.qZA(),h.qZA(),h.TgZ(14,"mat-card-actions",7),h.TgZ(15,"button",10),h.NdJ("click",function(){return t.submit()}),h._uU(16,"Get Records"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"div",1),h.TgZ(18,"mat-card",2),h.TgZ(19,"mat-card-header",11),h.TgZ(20,"mat-card-title"),h.TgZ(21,"span",4),h._uU(22,"Filter By Name"),h.qZA(),h.TgZ(23,"span",5),h.TgZ(24,"mat-icon",6),h._uU(25,"access_time"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(26,"mat-card-content",7),h.TgZ(27,"p",8),h._uU(28,"Enter Employee Name"),h.qZA(),h.TgZ(29,"input",12),h.NdJ("keyup",function(e){return t.applyFilter(e.target.value)}),h.qZA(),h.qZA(),h.TgZ(30,"mat-card-actions",7),h.TgZ(31,"button",10),h.NdJ("click",function(){return t.clear()}),h._uU(32,"Clear"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(33,"div",1),h.TgZ(34,"mat-card",2),h.TgZ(35,"mat-card-header",13),h.TgZ(36,"mat-card-title"),h.TgZ(37,"span",4),h._uU(38,"Add Record"),h.qZA(),h.TgZ(39,"span",5),h.TgZ(40,"mat-icon",6),h._uU(41,"access_time"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(42,"mat-card-content",7),h.TgZ(43,"p",8),h._uU(44,"Add New Record"),h.qZA(),h.qZA(),h.TgZ(45,"mat-card-actions",7),h.TgZ(46,"button",10),h.NdJ("click",function(){return t.addRecord()}),h._uU(47,"Add Record"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(13),h.Q6J("value",t.currentDate),h.xp6(16),h.Q6J("value",t.filterValue))},directives:[A.xw,A.yH,G.a8,G.dk,G.n5,b.Hw,G.dn,y.Lr,G.hq,x.lW,C.Nt],styles:[".course-header[_ngcontent-%COMP%]{color:#fff}.course-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:15px!important;display:flex;align-items:center}.course-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]   .course-duration[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center}.mat-card-actions[_ngcontent-%COMP%]{border-top:1px solid hsla(210,8%,51%,.13);padding:8px 0!important}"]}),e})();var W=o(8469);let V=(()=>{class e{constructor(e,t){this.element=e,this.renderer=t,this.el=e}onMouseOver(){this.renderer.setStyle(this.el.nativeElement,"background-color",this.color),this.renderer.setStyle(this.el.nativeElement,"font-size",this.size)}onMouseLeave(){this.renderer.setStyle(this.el.nativeElement,"background-color","white"),this.renderer.setStyle(this.el.nativeElement,"font-size",null)}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(h.Qsj))},e.\u0275dir=h.lG2({type:e,selectors:[["","BoldLine",""]],hostBindings:function(e,t){1&e&&h.NdJ("mouseover",function(){return t.onMouseOver()})("mouseleave",function(){return t.onMouseLeave()})},inputs:{color:"color",size:"size"}}),e})();var K=o(580),X=o(552);function ee(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," # "),h.qZA())}function te(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.qZA()),2&e){const e=t.index;h.xp6(1),h.hij(" ",e+1," ")}}function oe(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," Date "),h.qZA())}function ie(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.ALo(2,"momentPipe"),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",h.xi3(2,1,null==e?null:e.date,"YYYY-MM-DD")," ")}}function re(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," day "),h.qZA())}function se(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.ALo(2,"momentPipe"),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",h.xi3(2,1,null==e?null:e.date," dddd")," ")}}function ae(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," full Name "),h.qZA())}function ne(e,t){if(1&e&&(h.TgZ(0,"td",24),h.TgZ(1,"div",25),h.TgZ(2,"div",26),h.TgZ(3,"p",27),h._uU(4),h.qZA(),h.TgZ(5,"small"),h._uU(6),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){const e=t.$implicit;h.xp6(4),h.Oqu(null==e?null:e.firstName),h.xp6(2),h.Oqu(e.lastName)}}function le(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," start At "),h.qZA())}function ce(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.ALo(2,"momentPipe"),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",h.xi3(2,1,null==e?null:e.startAt,"HH:mm")," ")}}function de(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1,"endAt "),h.qZA())}function ue(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.ALo(2,"momentPipe"),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",h.xi3(2,1,null==e?null:e.endAt,"HH:mm")," ")}}function pe(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," project Name "),h.qZA())}function me(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.ALo(2,"ProjectPipe"),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",h.lcZ(2,1,null==e?null:e.dayWorkedPlace)," ")}}function he(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," duration "),h.qZA())}function ge(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",null==e?null:e.duration," ")}}function fe(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," daily wage "),h.qZA())}function Ze(e,t){if(1&e&&(h.TgZ(0,"td",24),h.TgZ(1,"div",25),h.TgZ(2,"div",26),h.TgZ(3,"p",27),h._uU(4),h.ALo(5,"currency"),h.qZA(),h.TgZ(6,"small"),h._uU(7,"wage From "),h.qZA(),h.TgZ(8,"small"),h._uU(9),h.ALo(10,"momentPipe"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){const e=t.$implicit;h.xp6(4),h.Oqu(h.Dn7(5,2,null==e?null:e.dailyWage,"ILS","symbol")),h.xp6(5),h.Oqu(h.xi3(10,6,e.wageFrom,"YYYY-MM"))}}function Ae(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," notes "),h.qZA())}function ye(e,t){if(1&e&&(h.TgZ(0,"td",24),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.hij(" ",null==e?null:e.notes," ")}}function ve(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," Pay Per Day"),h.qZA())}function Te(e,t){if(1&e&&(h.TgZ(0,"td",24),h.TgZ(1,"div",25),h.TgZ(2,"div",26),h.TgZ(3,"p",27),h._uU(4),h.ALo(5,"currency"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){const e=t.$implicit;h.xp6(4),h.Oqu(h.Dn7(5,1,null==e?null:e.payPerDay,"ILS","symbol"))}}function qe(e,t){1&e&&(h.TgZ(0,"th",23),h._uU(1," Action "),h.qZA())}function xe(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"td",28),h.TgZ(1,"a",29),h.NdJ("click",function(){const t=h.CHM(e).$implicit;return h.oxw().openDialog("Update",t)}),h._UZ(2,"i",30),h.qZA(),h.TgZ(3,"a",29),h.NdJ("click",function(){const t=h.CHM(e).$implicit;return h.oxw().openDialog("Delete",t)}),h._UZ(4,"i",31),h.qZA(),h.qZA()}}function be(e,t){1&e&&h._UZ(0,"tr",32)}function Ce(e,t){1&e&&h._UZ(0,"tr",33)}function Ne(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"mat-paginator",34),h.NdJ("page",function(t){return h.CHM(e),h.oxw().onChangedPage(t)}),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("length",e.totalRecords)("pageSize",e.recordsPerPage)("pageSizeOptions",e.pageSizeOptions)}}const Ee=[{path:"",component:(()=>{class e{constructor(e,t,o,i){this.dialog=e,this.employeeService=t,this.projectsService=o,this.recordsService=i,this.records=[],this.recordsPerPage=30,this.currentPage=1,this.pageSizeOptions=[30,50,100],this.totalRecords=0,this.paginator=Object.create(null),this.sort=Object.create(null),this.displayedColumns=["id","date","day","firstName","projectName","startAt","endAt","duration","dailyWage","payPerDay","notes","action"],this.dataSource=new Q.by(this.records),this.currentMonth=p().format("YYYY-MM-DD HH:mm:ss")}ngOnInit(){this.employeeService.getAllemployee(),this.projectsService.getAllProjects(),this.subProject=this.projectsService.projects$.pipe((0,d.h)(e=>void 0!==e)).subscribe(e=>{(0,L.T)(e.projects),this.getAllRecords()})}applyFilter(e){this.dataSource.filter=e.trim().toLowerCase()}getRecordsByDate(e){this.currentMonth=p(e).format("YYYY-MM-DD HH:mm:ss"),this.recordsService.getAllRecords(this.recordsPerPage,this.currentPage,this.currentMonth)}getAllRecords(){this.recordsService.getAllRecords(this.recordsPerPage,this.currentPage,this.currentMonth),this.subRecords$=this.recordsService.records$.subscribe(e=>{this.records=e.records,this.totalRecords=e.totaleRecords,this.dataSource=new Q.by(this.records)})}openDialog(e,t){t.action=e,this.dialog.open(H,{data:t,disableClose:!0}).afterClosed().subscribe(e=>{void 0!==e&&("Add"===e.event?this.recordsService.addNewRecord(e.data).subscribe(e=>{this.getAllRecords()}):"Update"===e.event?this.recordsService.updateRecord(e.data).subscribe(e=>{this.getAllRecords()}):"Delete"===e.event&&this.recordsService.deleteRecord(t.id).subscribe(e=>{this.getAllRecords()}))})}onChangedPage(e){this.currentPage=e.pageIndex+1,this.recordsPerPage=e.pageSize,this.recordsService.getAllRecords(this.recordsPerPage,this.currentPage,this.currentMonth),this.recordsService.records$.subscribe(e=>{this.records=e.records,this.totalRecords=e.totaleRecords,this.dataSource=new Q.by(this.records)})}ngOnDestroy(){this.subRecords$&&this.subRecords$.unsubscribe(),this.subProject&&this.subProject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(a.uw),h.Y36(g.M),h.Y36(f.m),h.Y36(Z.$))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-time-sheet"]],viewQuery:function(e,t){if(1&e&&(h.Gf(B.NW,7),h.Gf($.YE,7)),2&e){let e;h.iGM(e=h.CRH())&&(t.paginator=e.first),h.iGM(e=h.CRH())&&(t.sort=e.first)}},decls:46,vars:4,consts:[[3,"AddRecordEvent","filterByNameEvent","getRecordsByDateEvent"],["fxLayout","row wrap"],["fxFlex","100"],[1,"table-responsive"],["matTableResponsive","","mat-table","",1,"table","employee-list","wrap",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date","sticky",""],["matColumnDef","day"],["matColumnDef","firstName","sticky",""],["matColumnDef","startAt"],["matColumnDef","endAt"],["matColumnDef","projectName"],["matColumnDef","duration"],["matColumnDef","dailyWage"],["matColumnDef","notes"],["matColumnDef","payPerDay"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["color","#26c6da","size","24px","mat-row","",3,"BoldLine",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[1,"m-l-15"],[1,"font-bold","m-b-0","m-t-0"],["mat-cell","",1,"action-link"],[1,"m-r-10","cursor-pointer",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash","text-danger"],["mat-header-row",""],["color","#26c6da","size","24px","mat-row","",3,"BoldLine"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"]],template:function(e,t){1&e&&(h.TgZ(0,"app-filter-by-month",0),h.NdJ("AddRecordEvent",function(){return t.openDialog("Add",{})})("filterByNameEvent",function(e){return t.applyFilter(e)})("getRecordsByDateEvent",function(e){return t.getRecordsByDate(e)}),h.qZA(),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"mat-card"),h.TgZ(4,"mat-card-content"),h.TgZ(5,"div",3),h.TgZ(6,"table",4),h.ynx(7,5),h.YNc(8,ee,2,0,"th",6),h.YNc(9,te,2,1,"td",7),h.BQk(),h.ynx(10,8),h.YNc(11,oe,2,0,"th",6),h.YNc(12,ie,3,4,"td",7),h.BQk(),h.ynx(13,9),h.YNc(14,re,2,0,"th",6),h.YNc(15,se,3,4,"td",7),h.BQk(),h.ynx(16,10),h.YNc(17,ae,2,0,"th",6),h.YNc(18,ne,7,2,"td",7),h.BQk(),h.ynx(19,11),h.YNc(20,le,2,0,"th",6),h.YNc(21,ce,3,4,"td",7),h.BQk(),h.ynx(22,12),h.YNc(23,de,2,0,"th",6),h.YNc(24,ue,3,4,"td",7),h.BQk(),h.ynx(25,13),h.YNc(26,pe,2,0,"th",6),h.YNc(27,me,3,3,"td",7),h.BQk(),h.ynx(28,14),h.YNc(29,he,2,0,"th",6),h.YNc(30,ge,2,1,"td",7),h.BQk(),h.ynx(31,15),h.YNc(32,fe,2,0,"th",6),h.YNc(33,Ze,11,9,"td",7),h.BQk(),h.ynx(34,16),h.YNc(35,Ae,2,0,"th",6),h.YNc(36,ye,2,1,"td",7),h.BQk(),h.ynx(37,17),h.YNc(38,ve,2,0,"th",6),h.YNc(39,Te,6,5,"td",7),h.BQk(),h.ynx(40,18),h.YNc(41,qe,2,0,"th",6),h.YNc(42,xe,5,0,"td",19),h.BQk(),h.YNc(43,be,1,0,"tr",20),h.YNc(44,Ce,1,0,"tr",21),h.qZA(),h.YNc(45,Ne,1,3,"mat-paginator",22),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(6),h.Q6J("dataSource",t.dataSource),h.xp6(37),h.Q6J("matHeaderRowDef",t.displayedColumns),h.xp6(1),h.Q6J("matRowDefColumns",t.displayedColumns),h.xp6(1),h.Q6J("ngIf",t.records.length>0))},directives:[z,A.xw,A.yH,G.a8,G.dn,Q.BZ,W.F,Q.w1,Q.fO,Q.Dz,Q.as,Q.nj,i.O5,Q.ge,Q.ev,Q.XQ,Q.Gk,V,B.NW],pipes:[K.d,X.l,i.H9],styles:[""]}),e})(),data:{title:"\u05d3\u05d9\u05d5\u05d5\u05d7 \u05de\u05e9\u05db\u05d5\u05e8\u05d5\u05ea",urls:[{title:"\u05dc\u05d5\u05d7 \u05d4\u05d1\u05e7\u05e8\u05d4",url:"/dashboard"},{title:"\u05d3\u05d9\u05d5\u05d5\u05d7 \u05de\u05e9\u05db\u05d5\u05e8\u05d5\u05ea"}]}}];let _e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[r.Bz.forChild(Ee)],r.Bz]}),e})();var we=o(5174);let je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[i.uU],imports:[[i.ez,_e,we.m,y.wn,y.I$,u.rY]]}),e})()}}]);